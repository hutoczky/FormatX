(function () { const root = document.body; const buttons = document.querySelectorAll('.theme-switch [data-theme]'); const THEMES = ['lcars', 'holo', 'cyber']; const saved = localStorage.getItem('sciui:theme'); const initial = THEMES.includes(saved) ? saved : 'lcars'; applyTheme(initial); buttons.forEach(btn => btn.addEventListener('click', () => applyTheme(btn.dataset.theme))); function applyTheme(name) { THEMES.forEach(t => root.classList.remove(`theme-${t}`)); root.classList.add(`theme-${name}`); localStorage.setItem('sciui:theme', name); buttons.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.theme === name))); } })();